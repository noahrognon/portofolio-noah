---
import Layout from "../layouts/Layout.astro";
import Chat from "../components/ChatIA.astro";
import CardProject from "../components/CardProject.astro";
import { getProjects } from "../fonction/backend.js";
import chatIcon from "../assets/icons/chat.svg";
import downloadIcon from "../assets/icons/Download.svg";
import cvFile from "../assets/files/Curriculum_vitae_de_Noah_ROGNON_otcotbre_2025.pdf";
const projects = await getProjects();
import Contact from "../components/Contact.astro";
---

<Layout>
	<section
		class="relative overflow-hidden  py-24 text-white md:py-32"
	>
		<div class="absolute inset-0">
			<div
				class="absolute left-6 top-10 hidden text-xs font-mono leading-relaxed text-[#ff7a00]/10 sm:block"
			>
				&lt;projets&gt;
				<br />
				// Une s&eacute;lection
				<br />
				const portfolio = {"{"}
			</div>
			<span
				class="absolute left-1/4 top-[30%] hidden h-1 w-1 rounded-full bg-[#ff7a00]/60 sm:block"
			></span>
			<span
				class="absolute right-[22%] top-[40%] hidden h-1 w-1 rounded-full bg-[#ff7a00]/40 sm:block"
			></span>
			<span
				class="absolute bottom-16 right-10 hidden h-1 w-1 rounded-full bg-[#ff7a00]/50 sm:block"
			></span>
		</div>

		<div
			class="relative mx-auto flex max-w-4xl flex-col items-center px-6 text-center"
		>
			<h1
				class="text-4xl font-semibold leading-tight text-white sm:text-5xl"
			>
				Mes Projets
			</h1>
			<p class="mt-4 text-base text-slate-300 sm:text-lg">
				Une s&eacute;lection de mes r&eacute;alisations
				<span class="text-[#ff7a00]">les plus marquantes.</span>
			</p>
			<div
				class="mt-8 flex items-center justify-center gap-3 text-[#ff7a00]"
			>
				<span class="h-px w-12 bg-current"></span>
				<span class="h-1 w-1 rounded-full bg-current"></span>
				<span class="h-px w-12 bg-current"></span>
			</div>
		</div>
	</section>

	<section class=" py-20 text-white">
		<div class="mx-auto flex max-w-6xl flex-col gap-16 px-6">
			<div class="flex flex-col items-center text-center">
				<h2
					class="text-3xl font-semibold text-white sm:text-4xl md:text-5xl"
				>
					R&eacute;alisations
				</h2>
				<div
					class="mt-5 flex items-center justify-center gap-3 text-[#ff7a00]"
				>
					<span class="h-px w-12 bg-current"></span>
					<span class="h-1 w-1 rounded-full bg-current"></span>
					<span class="h-px w-12 bg-current"></span>
				</div>
				<p class="mt-4 max-w-2xl text-sm text-slate-300 sm:text-base">
					Une vitrine de mes projets, extraits de ma base de
					donn&eacute;es PocketBase pour mettre en avant mes
					r&eacute;alisations les plus significatives.
				</p>
			</div>

			{
				projects.length > 0 ? (
					<div class="grid gap-10 md:grid-cols-2 xl:grid-cols-3">
						{projects.map((projet) => (
							<CardProject projet={projet} />
						))}
					</div>
				) : (
					<div class="rounded-2xl border border-white/10 bg-white/5 px-6 py-10 text-center text-slate-300">
						<p class="text-base font-medium">
							Les projets arriveront bient&ocirc;t.
						</p>
						<p class="mt-2 text-sm text-slate-500">
							Ajoute des entr&eacute;es dans la collection
							PocketBase &laquo; Projets &raquo; pour les voir
							ici.
						</p>
					</div>
				)
			}
		</div>
	</section>
	<section class="pb-24 text-white">
		<div
			class="mx-auto max-w-3xl rounded-[2.5rem] border border-white/5  px-8 py-12 text-center shadow-[0_24px_45px_rgba(0,0,0,0.35)]"
		>
			<div class="flex items-center justify-center gap-3 text-[#ff7a00]">
				<span class="h-px w-12 bg-current"></span>
				<span class="h-1 w-1 rounded-full bg-current"></span>
				<span class="h-px w-12 bg-current"></span>
			</div>
			<h3 class="mt-6 text-3xl font-semibold sm:text-4xl">
				Vous voulez en voir plus ?
			</h3>
			<p class="mt-3 text-sm text-slate-300 sm:text-base">
				D&eacute;couvrez l'ensemble de mon travail et discutons de vos
				projets.
			</p>
			<div class="mt-8 flex flex-col gap-4 sm:flex-row sm:justify-center">
				<a
					href="#noahai-toggle"
					class="inline-flex items-center justify-center gap-2 rounded-full bg-[#ff7a00] px-6 py-3 text-sm font-semibold uppercase tracking-wide text-black shadow-[0_18px_30px_rgba(255,122,0,0.35)] transition hover:-translate-y-0.5 hover:bg-[#ff8c26] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#ff7a00]"
				>
					Demander &agrave; NoahAI
					<img
						src={chatIcon.src}
						alt=""
						class="h-4 w-4"
						aria-hidden="true"
					/>
				</a>
				<a
					href={cvFile}
					download
					class="inline-flex items-center justify-center gap-2 rounded-full border border-[#ff7a00] px-6 py-3 text-sm font-semibold uppercase tracking-wide text-[#ff7a00] transition hover:-translate-y-0.5 hover:bg-[#ff7a00] hover:text-black focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#ff7a00]"
				>
					T&eacute;l&eacute;charger mon CV
					<img
						src={downloadIcon.src}
						alt=""
						class="h-4 w-4"
						aria-hidden="true"
					/>
				</a>
			</div>
		</div>
	</section>
	<h2 class="text-5xl md:text-6xl font-bold tracking-tight mb-3 m-4">
		<span class="text-white">Contact</span>
	</h2>

	<!-- Sous-texte -->
	<p class="text-xl text-slate-400 max-w-2xl m-4">
		Contactez-moi pour
		<span class="text-[#ff7a00] font-medium"> débugger vos idées</span>
	</p>
	<Contact />
	<Chat />
</Layout>
