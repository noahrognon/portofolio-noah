---
import Layout from "../layouts/Layout.astro";
import ChatIA from "../components/ChatIA.astro";
import Heroapropos from "../components/Heroapropos.astro";
import Monparcours from "../components/Monparcours.astro";
import chatIcon from "../assets/icons/chat.svg";
import cvFileLocal from "../assets/files/Curriculum_vitae_de_Noah_ROGNON_otcotbre_2025.pdf";
import downloadIcon from "../assets/icons/Download.svg";
import Valeurs from "../components/Valeurs.astro";
import Contact from "../components/Contact.astro";
import { getCvFile } from "../fonction/backend.js";

const cvRecord = await getCvFile();
const cvFile = cvRecord?.url ?? cvFileLocal;
---

<Layout>
	<div
		class="absolute inset-0 >
			<div
				class="
		absolute
		left-6
		top-10
		hidden
		text-xs
		font-mono
		leading-relaxed
		text-[#ff7a00]
		10
		sm:block"
	>
		&lt;apropos&gt;
		<br />
		// En savoir plus sur moi
		<br />
		const portfolio = {"{"}
	</div>
	<span
		class="absolute left-1/4 top-[30%] hidden h-1 w-1 rounded-full bg-[#ff7a00]/60 sm:block"
	></span>
	<span
		class="absolute right-[22%] top-[40%] hidden h-1 w-1 rounded-full bg-[#ff7a00]/40 sm:block"
	></span>
	<span
		class="absolute bottom-16 right-10 hidden h-1 w-1 rounded-full bg-[#ff7a00]/50 sm:block"
	></span>

	<Heroapropos />
	<Monparcours />
	<Valeurs />
	<section class="pb-24 text-white">
		<div
			class="mx-auto max-w-3xl rounded-[2.5rem] border border-white/5 px-8 py-12 text-center shadow-[0_24px_45px_rgba(0,0,0,0.35)]"
		>
			<div class="flex items-center justify-center gap-3 text-[#ff7a00]">
				<span class="h-px w-12 bg-current"></span>
				<span class="h-1 w-1 rounded-full bg-current"></span>
				<span class="h-px w-12 bg-current"></span>
			</div>
			<h3 class="mt-6 text-3xl font-semibold sm:text-4xl">
				Vous voulez en voir plus ?
			</h3>
			<p class="mt-3 text-sm text-slate-300 sm:text-base">
				D&eacute;couvrez l'ensemble de mon travail et discutons de vos
				projets.
			</p>
			<div class="mt-8 flex flex-col gap-4 sm:flex-row sm:justify-center">
				<a
					href="#noahai-toggle"
					class="inline-flex items-center justify-center gap-2 rounded-full bg-[#ff7a00] px-6 py-3 text-sm font-semibold uppercase tracking-wide text-black shadow-[0_18px_30px_rgba(255,122,0,0.35)] transition hover:-translate-y-0.5 hover:bg-[#ff8c26] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#ff7a00]"
				>
					Demander &agrave; NoahAI
					<img
						src={chatIcon.src}
						alt=""
						class="h-4 w-4"
						aria-hidden="true"
					/>
				</a>
				<a
					href={cvFile}
					download
					class="inline-flex items-center justify-center gap-2 rounded-full border border-[#ff7a00] px-6 py-3 text-sm font-semibold uppercase tracking-wide text-[#ff7a00] transition hover:-translate-y-0.5 hover:bg-[#ff7a00] hover:text-black focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#ff7a00]"
				>
					T&eacute;l&eacute;charger mon CV
					<img
						src={downloadIcon.src}
						alt=""
						class="h-4 w-4"
						aria-hidden="true"
					/>
				</a>
			</div>
		</div>
	</section>
	<h2 class="text-5xl md:text-6xl font-bold tracking-tight mb-3 m-4">
		<span class="text-white">Contact</span>
	</h2>

	<!-- Sous-texte -->
	<p class="text-xl text-slate-400 max-w-2xl m-4">
		Contactez-moi pour
		<span class="text-[#ff7a00] font-medium"> débugger vos idées</span>
	</p>
	<Contact />

	<ChatIA />
</Layout>
